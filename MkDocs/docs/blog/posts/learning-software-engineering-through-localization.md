---
date:
  created: 2024-09-16T00:05:45
categories:
  - 学习
  - 编程
  - 汉化
---

# 汉化可以学习软件架构

我发现做开源软件汉化，其实是学习真实软件架构一个很棒的方法。

虽然汉化基本上只是改改字符串，但还是走马观花般地逛了一遍整个软件，对一种语言、一种框架的编写有了基本的印象。
<!-- more -->

有时还需要做一点运行逻辑的改动：
例如有的 enum 没法修改(1)，可能要在使用处做替换，或者在获取函数里加判断参数；
例如在一个单位转换器中(2)，为了不干扰转换，要在输入处将中文文本替换为对应的英文关键词；
例如 `"在 {terminal} 里打开"`(3)需要根据终端名字是中文还是英文来确定是否添加空格。
例如有的右键菜单是自带组件(4)，要设置程序语言为中文来自动汉化。
{ .annotate }

1.  PowerToys 里有个选择列表是从 enum 的名字里取值，enum 用在很多地方甚至存在配置文件里没法改，只好套个转换器，那会儿我对 C# 一点都不会，跟着 GPT 3.5 一点点试出来的。

    GitHub Desktop 一个关于修改方式的 enum 用在各种悬浮提示里，也用在找图标上，改了会找不到图标，这里我是给 enum 的获取函数加了个是否使用中文版的参数。

2.  PowerToys Run 的单位转换插件。
    比如，输入 1 千米每秒，换成 1 km/s，然后交给插件处理。
    也需要考虑航速`节`与`字节`、小时缩写`时`与`马力时`、卡路里缩写`卡`与`卡尔文`等冲突、`千克-公斤` `位-比特` `周-星期`等别称、平方立方每千兆毫微之类描述词的处理等。

3.  这是 GitHub Desktop，如果你好奇的话。
    Windows Terminal 的名字就是中文的 `终端`，你总不会希望看到 `在 终端 里打开` 这种玩意儿吧。

4.  很多自带编辑框都是，比如 PowerToys、GitHub Desktop 等。

或者还得处理环境配不上编译报错(1)、中文编码不兼容(2)、字体风格不对(3)等问题。
{ .annotate }

1.  Keyviz v2.0.0 Alpha2 的构建就需要特定一个旧版的 Dart 和 Flutter，并且还是多平台（我没有苹果电脑），只好用 GitHub Actions 了。

2.  没错就是你 ExplorerPatcher，我讨厌 C。

3.  Kando 有些地方用了手写风格的字体，为了用户体验，我会换成对应风格的中文字体。(1)
    此外，Keyviz 的 Flutter 在 Windows 下还有中文字体异常的问题得修。
    { .annotate }

    1.  不过反正 Keyviz 也已经变成官方翻译了，我也不管了。

你现在来问我 PowerToys（C#）负责某功能的模块在哪、GitHub Desktop（TS）界面怎么个模型、Kando（Dart）怎么用工作流构建，我至少也能说上一点了。

<small>这里有很多注释！记得看！</small>
